<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="words.js"></script>
</head>
<body>
<script>
    let allWords = [
        "милость", "формула", "арматура", "телёнок", "записка", "дизайнер", "пипетка", "животное", "желтозём", "буржуазия", "диаграмма", "хромосома", "щитовидка", "архаизм", "шизофрения", "яйцеклетка", "антоним", "бедняга", "трактат", "сожитель", "корчёвка",
        "жаркое", "рутина", "комедия", "ломбард", "анатомия", "баталист", "косточка", "экономия", "эвкалипт", "барашек", "боярышник", "двигатель", "гидрология", "голограмма", "громоотвод", "свиристель", "устройство", "ультиматум", "этимология", "юрисдикция", "абордаж",
        "подруга", "продукт", "единорог", "писатель", "вермишель", "язычество", "богатство", "стоматолог", "ускорение", "уничтожение", "заклёпка", "картёжник", "надёжность", "авиасалон", "аквариум", "арматурщица", "безматок", "блиндаж", "вафельщица", "горбуша", "джокер",
        "автор", "повесть", "жестокость", "мартышка", "жаворонок", "чернослив", "вафельница", "целомудрие", "блокнот", "буквоед", "нахлёстка", "боксит", "боровик", "брусок", "валькирия", "выкаливание", "деноминация", "инобытие", "корифей", "кульман", "надсечка",
        "блузка", "гвардия", "отслоение", "бездельник", "батиплан", "гортензия", "задевание", "ископаемое", "квашнин", "коллапс", "концессия", "лексика", "мединститут", "написание", "отблеск", "паутинка", "прорезка", "пугало", "синева", "синтепон", "смелость",
        "шарлотка", "агрономия", "эвристика", "авиамодель", "художество", "архаист", "воеводство", "выразитель", "купюра", "наложение", "обращение", "осознание", "поднебесная", "прелесть", "призвание", "прямота", "самозащита", "сроднение", "стенопись", "термометр", "фальшивка",
        "аэросъёмка", "вакуумметр", "ворсильщик", "забавник", "раздор", "сифонофора", "склёпщица", "стрела", "трешкоут", "щеглёнок", "студень", "томагавк", "абрикос", "боеголовка", "мармеладка", "декстрин", "кукарекание", "развозчица", "сценичность", "телебашня", "хлорка",
        "автомобиль", "ассиметрия", "газопровод", "сейсмограф", "бесшумность", "минутка", "подбородок", "подросток", "прообраз", "флорист", "штурмовик", "самоанализ", "кассатор", "проволока", "растирание", "хохотание", "пульсация", "самородок", "вентилятор", "амортизатор", "родник",
        "маркетинг", "инкубатор", "малахит", "паровоз", "русалочка", "валерьянка", "поломка", "двустволка", "гранатомёт", "программист", "потолок", "кооператив", "суходол", "забастовка", "странствие", "туземка", "снегурочка", "цесарка", "экскаватор", "напёрсток", "фиаско",
        "автомеханик", "адсорбент", "абажур", "всемирность", "глухонемота", "интрига", "адмирал", "крематорий", "монетарист", "коленка", "отстранение", "критика", "прибалтика", "разработка", "распилка", "костёр", "эмират", "удабривание", "федералист", "требование", "молодчина",
        "антисептик","металлург","микрофауна","декламация","окуривание","сберкасса","назревание","скапывание","скирдовоз","актинограф","югославка","пересушка","обтирка","паголенок","холстина","гарпунщик","ковроделка","тундрянка","дворянство","выработка","рутинность","камерунка","легковушка","пластеин","совнарком","поддувание","пустырник","гидростат","минотавр","флибустьер","тюрчанка","лоббистка","морзянка","экспедитор","автогигант","полярник","константа","боливийка","сортимент","повстание","провокатор","велогонщик","астероид","проминка","каллиграф","отгнивание","марказит","подсечка","каретник","проскачка","шпротина","авиадесант","полиритмия","библиотека","платинка","русистика","чалмоносец","буртование","крановщик","парусность","оргкомитет","платочек","обтирание","надхвостье","секундант","бульдозер","нитрование","самокатка","сопельщик","отрадность","экономист","тамплиер","прогалина","раздутость","франциско","африканер","пародонтоз","ликтрос","мерлушка","остекление","картавость","голкипер","экстремизм","акробат","паремейник","светокопия","разоритель","содержание","автосалон","конформист","бардачок","темперация","альпинист","кармелит","терновник","синекдоха","треуголка","казачество","подчеканка","метрдотель","самоохрана","бутылконос","пародист","оставление","некробиоз"
    ];
    let wordsFromWords = {

    };
    function shuffle(arr) {
        let j, temp;
        for (let i = arr.length - 1; i > 0; i--) {
            j = Math.floor(Math.random() * (i + 1));
            temp = arr[j];
            arr[j] = arr[i];
            arr[i] = temp;
        }
    }
    shuffle(words);
    let newWords = [];
    wordsFromWords = {};
    for (let i = 0; i < words.length; i += 13) {
        let bigWord = words[i];
        if (!newWords.includes(bigWord) &&
            !allWords.includes(bigWord) &&
            bigWord.length > 4 &&
            bigWord.length < 11) {
            let newArr = [];
            for (let q = 0; q < words.length; q++) {
                if (!newArr.includes(words[q]) && testWordsInWord(words[q], bigWord)) {
                    newArr.push(words[q]);
                }
            }
            if (newArr.length > 60 && newArr.length < 100) {
                newWords.push(bigWord);
                wordsFromWords[bigWord] = newArr;
            }
        }
        if(newWords.length === 210) break;
    }

    // for (let i = 0; i < allWords.length; i++) {
    //     if (i % 21 === 0) {
    //         console.groupEnd('group');
    //         console.group('group');
    //     }
    //     console.log(allWords[i], wordsFromWords[allWords[i]].length);
    // }

    function testWordsInWord(word, inWord) {
        if (word.length > inWord || word === inWord) return false;
        let letrs = inWord.split('');
        for (let j = 0; j < word.length; j++) {
            if (!letrs.includes(word[j])) return false;
            else {
                letrs.splice(letrs.indexOf(word[j]), 1);
            }
        }
        return true;
    }
    console.log(newWords);
    console.log(wordsFromWords);

    /*


    let wordsFromWords = {};
    for (let i = 0; i < bigWords.length; i++) {
        let newArr = [];
        for (let q = 0; q < words.length; q++) {
            if (!newArr.includes(words[q]) && testWordsInWord(words[q], bigWords[i])) {
                newArr.push(words[q]);
            }
        }
        if (newArr.length > 14) {
            let z = 0;
            while (newArr.length > 90) {
                if (Math.random() > 0.7) {
                    newArr.splice(z, 1);
                }
                z++;
                if (z >= newArr.length) z = 0;
            }
            wordsFromWords[bigWords[i]] = newArr;
        }
    }
    console.log(Object.keys(wordsFromWords)); */

    console.log(newWords.length);
    console.log(wordsFromWords);
    localStorage.setItem('newWords', JSON.stringify(newWords));
    localStorage.setItem('wordsFromWords', JSON.stringify(wordsFromWords));
</script>
</body>
</html>